<view class="page-container">
  <!-- 渐变背景 -->
  <view class="gradient-header"></view>
  
  <!-- 自定义导航栏 -->
  <view class="custom-nav" style="padding-top: {{statusBarHeight}}px;">
    <view class="nav-content">
      <view class="back-icon" bindtap="handleBack">
        <image src="https://miniknowledge.9000aigc.com/assets/icons/back (1).png" mode="aspectFit"></image>
      </view>
      <view class="nav-title">资料库</view>
    </view>
  </view>

  <!-- 加载中显示 -->
  <view wx:if="{{loading}}" class="loading">
    <view class="loading-spinner"></view>
  </view>

  <!-- 文章内容 -->
  <view wx:else class="article-detail-content">    
    <!-- 使用mp-html组件渲染内容 -->
    <mp-html 
      content="{{content}}" 
      show-img-menu="{{true}}"
      lazy-load="{{false}}"
      tag-style="{{tagStyle}}"
    />
    
    <!-- 登录按钮 -->
    <view wx:if="{{showLoginButton}}" class="login-button-container">
      <button class="login-button" bindtap="handleLogin">
        {{buttonText}}
      </button>
    </view>
  </view>

  <!-- 客服二维码模态框 -->
  <view class="qrcode-modal" wx:if="{{showQrcodeModal}}" bindtap="closeQrcodeModal">
    <view class="qrcode-container" catchtap="stopPropagation">
      <view class="qrcode-title">加好友咨询</view>
      <image src="https://mini.9000aigc.com/assets/images/kefu.png" mode="aspectFit" class="qrcode-image" show-menu-by-longpress="true"></image>
      <view class="qrcode-tips">长按识别二维码添加客服</view>

    </view>
  </view>

  <!-- 固定底部栏 -->
  <view class="fixed-bottom-bar">
    <view class="bottom-bar-left">
      <image src="https://miniknowledge.9000aigc.com/assets/images/logo_avatar.png" mode="aspectFit" class="logo-icon"></image>
      <text class="company-name">9000AI</text>
    </view>
    <view class="bottom-bar-right">
      <button class="action-item share-button" open-type="share">
        <image src="https://miniknowledge.9000aigc.com/assets/icons/shares.png" mode="aspectFit" class="action-icons"></image>
        <text>分享</text>
      </button>
      <view class="action-item" bindtap="handleCollection">
        <image src="{{isCollected ? 'https://miniknowledge.9000aigc.com/assets/icons/collection-active.png' : 'https://miniknowledge.9000aigc.com/assets/icons/collection.png'}}" mode="aspectFit" class="action-icon"></image>
        <text>{{isCollected ? '已收藏' : '收藏'}}</text>
      </view>
    </view>
  </view>
</view> 